# ═══════════════════════════════════════════════════════════════
# clickterm - tmux configuration
# Mouse-driven development environment
# ═══════════════════════════════════════════════════════════════

# ─────────────────────────────────────────────────────────────────
# CORE SETTINGS
# ─────────────────────────────────────────────────────────────────

# Enable mouse support (click, drag, scroll)
set -g mouse on

# Initialize new panes with clickterm shell setup (welcome screen + aliases)
set -g default-command 'bash --init-file ~/.config/clickterm/shell-init.sh'

# Start pane/window numbering at 1
set -g base-index 1
set -g pane-base-index 1

# Don't rename windows automatically
set -g allow-rename off

# Increase scrollback buffer
set -g history-limit 10000

# Reduce escape time for better responsiveness
set -g escape-time 10

# ─────────────────────────────────────────────────────────────────
# THEME - Nord
# ─────────────────────────────────────────────────────────────────

source-file ~/.config/clickterm/tmux-theme.conf

# ─────────────────────────────────────────────────────────────────
# BUTTON CLICK HANDLERS
# ─────────────────────────────────────────────────────────────────

# Handle all status bar clicks via dispatcher script
bind -n MouseUp1Status run-shell '~/.config/clickterm/dispatch.sh "#{mouse_status_range}"'

# ─────────────────────────────────────────────────────────────────
# MOUSE BEHAVIOR
# ─────────────────────────────────────────────────────────────────

# Click pane to select
bind -n MouseDown1Pane select-pane -t =

# Drag border to resize
bind -n MouseDrag1Border resize-pane -M

# Scroll with mousewheel
bind -n WheelUpPane if-shell -F "#{||:#{pane_in_mode},#{mouse_any_flag}}" \
    "send-keys -M" \
    "copy-mode -e"

# ═══════════════════════════════════════════════════════════════
# END clickterm configuration
# ═══════════════════════════════════════════════════════════════
